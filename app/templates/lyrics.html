<!DOCTYPE html>
<html lang="en">
<head>
    <title>Tittel</title>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            var namespace = '/lyrics';
            var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port + namespace);

            var updateView = function (data) {
                //TODO: Clear view method
                $("#lyrics_text").html('');


                $("#artist").html(data.artist);
                $("#title").html(data.title);


                var lyrics = data.lyrics.split('\n');
                lyrics.forEach(function (line) {
                    $("#lyrics_text").append('<span>' + line + '</span> </br>');
                });
            };

            socket.on('connect', function () {
                console.log('connected')
            });

            socket.on('my_response', function () {
                username = window.location.pathname.split("/").pop();
                socket.emit('send_username', {data: username});
            });

            socket.on('json', function (data) {
                console.log('data recieved');
                updateView(data);
            });

            socket.on('not_scrobbling', function (data) {
                console.log('Not scrobbling');
               $('#lyrics_text').html('You don\'t appear to be scrobbling');
            });

        });
    </script>

    <style>
        body {
            font-family: "sans-serif";
            color: #000;
            height: 100%;
            margin: 0;
        }

        #lyrics {
            background-color: rgba(255, 255, 2555, 0.8);
            width: 40%;
            text-align: center;
            padding-top: 50px;
            padding-bottom: 30px;
            font-family: sans-serif;
            margin: auto;
            display: block;
            overflow: auto;
            height: auto;
            min-height: 100vh !important;
        }

        #lyrics_text {

        }

        .content:before {
            content: "";
            position: fixed;
            left: 0;
            right: 0;
            z-index: -1;

            display: block;
            background-image: url('{{ image }}');
            background-size: cover;
            width: 100%;
            height: 100%;

            -webkit-filter: blur(5px);
            -moz-filter: blur(5px);
            -o-filter: blur(5px);
            -ms-filter: blur(5px);
            filter: blur(5px);
        }

        .content {
            overflow: auto;
            position: relative;
            height: 100%;
            margin: auto;
            -webkit-transform: scale(1.1);
            -moz-transform: scale(1.1);
            -o-transform: scale(1.1);
            -ms-transform: scale(1.1);
            transform: scale(1.1);
        }

    </style>

</head>
<body>
<div class="content">
    <div id="lyrics">
        <h1 id="title">Title</h1>
        <h3 id="artist">Artist</h3>
        <div id="lyrics_text">

        </div>
    </div>
</div>

</body>


</html>